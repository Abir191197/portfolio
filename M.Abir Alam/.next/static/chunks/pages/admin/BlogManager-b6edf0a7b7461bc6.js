(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{368:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/BlogManager",function(){return s(1570)}])},1570:function(e,t,s){"use strict";s.r(t);var l=s(5893),a=s(7294);s(91);var o=s(6501),r=s(2448),i=s(3718),n=s(5152),c=s.n(n);let d=c()(()=>Promise.all([s.e(199),s.e(764),s.e(167)]).then(s.t.bind(s,1167,23)),{loadableGenerated:{webpack:()=>[1167]},ssr:!1}),m=e=>{let{token:t}=e,[s,n]=(0,a.useState)([]),[c,m]=(0,a.useState)({title:"",description:"",topic:"",img:"",readTime:""}),[u,h]=(0,a.useState)(!1),[p,g]=(0,a.useState)(null),[b,x]=(0,a.useState)(!1),f=async()=>{try{let e=await fetch("https://portfolio-dnjj.vercel.app/blogs",{headers:{Authorization:"Bearer ".concat(t)}});if(!e.ok)throw Error("Failed to fetch blogs");let s=await e.json();n(s)}catch(l){o.Am.error(l.message)}};(0,a.useEffect)(()=>{t&&f()},[t]);let j=e=>{let{name:t,value:s}=e.target;m(e=>({...e,[t]:s}))},y=e=>{m(t=>({...t,description:e}))},N=async e=>{e.preventDefault();try{let s=await fetch(u?"https://portfolio-dnjj.vercel.app/blogs/".concat(p):"https://portfolio-dnjj.vercel.app/blogs",{method:u?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(c)});if(!s.ok)throw Error("Failed to save blog");o.Am.success(u?"Blog updated successfully":"Blog created successfully"),m({title:"",description:"",topic:"",img:"",readTime:""}),g(null),h(!1),x(!1),f()}catch(l){o.Am.error(l.message)}},v=e=>{m(e),g(e._id||null),h(!0),x(!0)},w=async e=>{if(window.confirm("Are you sure you want to delete this blog?"))try{let s=await fetch("https://portfolio-dnjj.vercel.app/blogs/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}});if(!s.ok)throw Error("Failed to delete blog");o.Am.success("Blog deleted successfully"),f()}catch(l){o.Am.error(l.message)}};return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold",children:"Blog Management"}),(0,l.jsx)("button",{onClick:()=>x(!b),className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:b?"Hide Form":"Add New Blog"})]}),b&&(0,l.jsxs)("form",{onSubmit:N,className:"mb-8 bg-white p-6 rounded-lg shadow-md",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsx)("input",{type:"text",name:"title",value:c.title,onChange:j,placeholder:"Blog Title",className:"border p-2 rounded",required:!0}),(0,l.jsx)("input",{type:"text",name:"topic",value:c.topic,onChange:j,placeholder:"Topic eg. Web Development/technology/Self-improvement",className:"border p-2 rounded",required:!0}),(0,l.jsx)("input",{type:"url",name:"img",value:c.img,onChange:j,placeholder:"Image URL => use unsplash.com/s3.amazonaws.com/imgbb.com ",className:"border p-2 rounded",required:!0}),(0,l.jsx)("input",{type:"text",name:"readTime",value:c.readTime,onChange:j,placeholder:"Read Time eg. 5 mins",className:"border p-2 rounded",required:!0})]}),(0,l.jsx)(d,{value:c.description,onChange:y,className:"mt-4",placeholder:"Blog Description",modules:{toolbar:[[{header:"1"},{header:"2"},{font:[]}],[{list:"ordered"},{list:"bullet"}],[{align:[]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],["link"],["blockquote","code-block"],["image"]]}}),(0,l.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,l.jsx)("button",{type:"submit",className:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600",children:u?"Update Blog":"Create Blog"}),(0,l.jsx)("button",{type:"button",onClick:()=>x(!1),className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"Cancel"})]})]}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(e=>(0,l.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-md",children:[(0,l.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,l.jsx)("h3",{className:"font-bold text-lg",children:e.title}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("button",{onClick:()=>v(e),className:"text-blue-500 hover:text-blue-600",children:(0,l.jsx)(r.Z,{size:20})}),(0,l.jsx)("button",{onClick:()=>w(e._id),className:"text-red-500 hover:text-red-600",children:(0,l.jsx)(i.Z,{size:20})})]})]}),(0,l.jsx)("img",{src:e.img,alt:e.title,className:"w-full h-40 object-cover rounded mb-2"}),(0,l.jsx)("p",{className:"text-gray-600 text-sm mb-2",children:e.topic}),(0,l.jsxs)("p",{className:"text-gray-600 text-sm mb-2",children:["Read Time: ",e.readTime]})]},e._id))})]})};t.default=m}},function(e){e.O(0,[288,774,888,179],function(){return e(e.s=368)}),_N_E=e.O()}]);